<!DOCTYPE html>
<html lang="en">

	<head>

 	<meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">
    	<meta name="google-signin-client_id" content="647589413183-bdfcadf4bm2vugreeo6a8n4hj3ath8rg.apps.googleusercontent.com">
    

    <title>Scatalog</title>

    <!-- Bootstrap core CSS -->
    
   	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/css/bootstrap.min.css">
   	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.6/umd/popper.min.js"></script>
   	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/js/bootstrap.min.js"></script>

  	
     <!-- Custom styles for this template -->
    <link href="../css/style.css" rel="stylesheet">
   	<script>
   		function initialize() {
   			var theElement = document.getElementById("searchText");

   			theElement.addEventListener("focusout", function(){
   			    _this = this;
   			    setTimeout(function () {
   			        _this.focus();
   			    }, 0);
   			})
   			$("accordion").on('click', function (e) { e.preventDefault(); })
   		}
		function srch() {
			var searchText = document.getElementById("searchText").value; 
			//if(searchText.length > 0)
			//	document.getElementById("searchText").style.borderColor = "#4292f4"; 
			//else
				//document.getElementById("searchText").style.borderColor = "black"; 
			var xhttp = new XMLHttpRequest(); 
  			xhttp.open("GET", "../jsp/homeSearch.jsp?searchText=" +  document.getElementById("searchText").value, true); 
  			xhttp.send(); 
  			xhttp.onreadystatechange = function updateResults() {
  				if(this.readyState == 4 && this.status == 200) {
  					document.getElementById("accordion").innerHTML = xhttp.responseText; 
  					if(this.responseText.trim().length < 1 && searchText.length > 0)
  						document.getElementById("searchText").style.borderColor = "#dc3545"; 
  					else if(searchText.length > 0)
  						document.getElementById("searchText").style.borderColor = "#4292f4"; 
  					else 
  						document.getElementById("searchText").style.borderColor = "black"; 
  				}
  			};
  			
		}
		function onSuccess(googleUser) {
		      console.log('Logged in as: ' + googleUser.getBasicProfile().getName());
		    }
		    function onFailure(error) {
		      console.log(error);
		    }
		    function renderButton() {
		      gapi.signin2.render('my-signin2', {
		        'scope': 'profile email',
		        'width': 240,
		        'height': 50,
		        'longtitle': true,
		        'theme': 'dark',
		        'onsuccess': onSuccess,
		        'onfailure': onFailure
		      });
		    }
		
	</script>
	<script src="https://apis.google.com/js/platform.js?onload=renderButton" async defer></script>

  </head>

<body onload="initialize()">

    <!-- Navigation -->
    <div class = "nav-bar">
    		<nav class="navbar navbar-expand-md navbar-dark bg-dark fixed-top justify-content-center ">
        		<a href="/" class="navbar-brand d-flex w-20 mr-auto">Scatalog</a>
    			<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#collapsingNavbar3">
        			<span class="navbar-toggler-icon"></span>
    			</button>
    			<div class="navbar-collapse collapse" id="collapsingNavbar3">
        			<ul class="navbar-nav mr-auto w-100 justify-content-center">
            			<li class="nav-item active">
                			<a class="nav-link" href="#">HOME</a>
            			</li>
            			<li class="nav-item">
                			<a class="nav-link" href="explore.html">EXPLORE</a>
            			</li>
            			<li class="nav-item">
               			<a class="nav-link" href="department.html">BY DEPARTMENT</a>
            			</li>
        			</ul>
        			<ul class="nav navbar-nav ml-auto w-100 justify-content-end">
           			<li class="nav-item">
                			<a class="nav-link" href="dashboard.html">User Dashboard</a>
           			</li>
            			<li class="nav-item">
                			<a class="nav-link" href="login.html">Sign-In</a>
            			</li>  
        			</ul>
    			</div>
    		</nav>
	</div>
 
	
	<!-- Page Content -->
	<div class="row">
		<!-- Side Col Left -->
		<div class="col-md-2"></div>
		
		<!-- Search Bar -->
		<div class="col-md-8">
			<form name="search">
	  			<div class="form-group">
	   				<label for="search"></label>
	    				<input id="searchText" type="text" class="form-control" aria-describedby="search" placeholder="Scat Dat Course!" oninput="srch();" autocomplete="off"  autofocus/>
	  			</div>
	  		</form>
	  		
			<!-- Course Item -->	
			<div id="accordion" role="tablist" aria-multiselectable="true"> </div>
		</div>
		<!-- Side Col Right -->
		<div class="col-md-2"></div>	
	</div>
</body>
  

</html>
